(this.webpackJsonpbazamjam=this.webpackJsonpbazamjam||[]).push([[0],{31:function(t,e,i){},33:function(t,e,i){},35:function(t,e,i){"use strict";i.r(e);var a=i(3),n=i.n(a),r=i(21),o=i.n(r),s=(i(31),i(17)),c=i.n(s),u=i(22),h=i(6),l=i(7),d=i(11),f=i(10),v=i(9),p=(i(33),i(26)),j=i(0),b=function(t){var e=t.isRecording?"Stop Recording":"Start Recording",i=t.isRecording?"warning":"success";return Object(j.jsx)(p.a,{className:"btn mb-3",type:"checkbox",value:"1",variant:i,checked:t.isRecording,onClick:t.onClick,children:e})},m=i(36),g=i(37),O=i(2),y=i(25),k=function(t){Object(f.a)(i,t);var e=Object(v.a)(i);function i(t){return Object(h.a)(this,i),e.call(this,t)}return Object(l.a)(i,[{key:"binWidth",get:function(){return this.props.fs/(2*this.props.binCount)}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"update",value:function(){this.render()}},{key:"rollingMax",value:function(t,e){for(var i=-1/0,a=Array(e).fill(i),n=Array(e).fill(i),r=0;r<t.length;r++)for(var o=t[r],s=a.length-1;s>=0;s--){if(o>a[s]){for(var c=0;c<s;c++)a[c]=a[c+1],n[c]=n[c+1];a[s]=o,n[s]=r;break}}return[a,n]}},{key:"getLargestNotes",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,i=this.rollingMax(this.props.freqData,e),a=Object(O.a)(i,2),n=(a[0],a[1]),r=n.map((function(e){return e*t.binWidth+t.binWidth/2}));return r}},{key:"render",value:function(){var t=this.getLargestNotes(2).reverse();return Object(j.jsx)("div",{children:Object(j.jsxs)(m.a,{children:[Object(j.jsxs)(g.a,{children:[t.map((function(t){return Object(j.jsx)("p",{children:t.toFixed(2)})})),Object(j.jsxs)("p",{children:["Bin width: ",this.binWidth]})]}),Object(j.jsx)(g.a,{children:t.map((function(t){return Object(j.jsx)("p",{children:y.a.fromFreq(t)})}))})]})})}}]),i}(n.a.Component),x=function(t){Object(f.a)(i,t);var e=Object(v.a)(i);function i(t){var a;return Object(h.a)(this,i),(a=e.call(this,t)).canvas=void 0,a.discount=.8,a.canvas=n.a.createRef(),a}return Object(l.a)(i,[{key:"componentDidUpdate",value:function(){this.draw()}},{key:"draw",value:function(){var t=this.props,e=t.freqData,i=t.width,a=t.height,n=this.canvas.current.getContext("2d");n.clearRect(0,0,i,a),n.lineWidth=2,n.strokeStyle="#000000";var r,o=i/e.length*2.5,s=0,c=e.reduce((function(t,e){return t<e?t:e}));for(var u in e)r=Math.pow(e[u]-c,1.2),n.fillStyle="rgb(".concat(r,",50,50,").concat(r,")"),n.fillRect(s,a-r/2,o,r),s+=o}},{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("canvas",{className:"timeDomGraph",width:this.props.width,height:this.props.height,ref:this.canvas}),Object(j.jsx)("p",{})]})}}]),i}(n.a.Component),D=function(t){Object(f.a)(i,t);var e=Object(v.a)(i);function i(t){var a;return Object(h.a)(this,i),(a=e.call(this,t)).canvas=void 0,a.canvas=n.a.createRef(),a}return Object(l.a)(i,[{key:"componentDidUpdate",value:function(){this.draw()}},{key:"draw",value:function(){var t=this.props,e=t.audioData,i=t.width,a=t.height,n=this.canvas.current.getContext("2d"),r=0,o=1*i/e.length;for(var s in n.lineWidth=2,n.strokeStyle="#000000",n.clearRect(0,0,i,a),n.beginPath(),n.moveTo(0,a/2),e){var c=e[s]/255*a;n.lineTo(r,c),r+=o}n.lineTo(r,a/2),n.stroke()}},{key:"render",value:function(){return Object(j.jsx)("canvas",{className:"timeDomGraph",width:this.props.width,height:this.props.height,ref:this.canvas})}}]),i}(n.a.Component),w=function(t){Object(f.a)(i,t);var e=Object(v.a)(i);function i(t){var a;return Object(h.a)(this,i),(a=e.call(this,t)).audioContext=void 0,a.analyser=void 0,a.source=void 0,a.audioActive=!1,a.FFT_SIZE=2048,a.SAMPLE_RATE=16e3,a.timeDomainBuffer=void 0,a.freqDomainBuffer=void 0,a.framReqID=0,a.timeDomainBuffer=new Uint8Array(a.FFT_SIZE),a.freqDomainBuffer=new Float32Array(a.FFT_SIZE/2),a.state={timeData:a.timeDomainBuffer,freqData:a.freqDomainBuffer},a.tick=a.tick.bind(Object(d.a)(a)),a}return Object(l.a)(i,[{key:"startAudio",value:function(){null!=this.props.audio&&(null==this.audioContext&&(this.audioContext=new window.AudioContext({sampleRate:this.SAMPLE_RATE})),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.FFT_SIZE,this.source=this.audioContext.createMediaStreamSource(this.props.audio),this.source.connect(this.analyser),this.audioActive=!0,this.framReqID=requestAnimationFrame(this.tick))}},{key:"stopAudio",value:function(){var t,e;null===(t=this.analyser)||void 0===t||t.disconnect(),null===(e=this.source)||void 0===e||e.disconnect(),this.analyser=null,this.source=null,this.audioActive=!1,cancelAnimationFrame(this.framReqID)}},{key:"checkStatusUpdates",value:function(){null==this.props.audio||this.audioActive?null==this.props.audio&&this.audioActive&&this.stopAudio():this.startAudio()}},{key:"tick",value:function(t){this.analyser&&this.timeDomainBuffer&&this.freqDomainBuffer&&(this.analyser.getByteTimeDomainData(this.timeDomainBuffer),this.analyser.getFloatFrequencyData(this.freqDomainBuffer),this.setState({timeData:this.timeDomainBuffer,freqData:this.freqDomainBuffer}),this.framReqID=requestAnimationFrame(this.tick))}},{key:"render",value:function(){var t,e;this.checkStatusUpdates();var i=null==this.audioContext?"":Object(j.jsx)(k,{freqData:this.state.freqData,fs:null!==(t=null===(e=this.audioContext)||void 0===e?void 0:e.sampleRate)&&void 0!==t?t:0,binCount:this.FFT_SIZE/2,width:300,height:300});return Object(j.jsxs)("div",{children:[Object(j.jsxs)(m.a,{children:[Object(j.jsx)(g.a,{children:Object(j.jsx)(D,{audioData:this.state.timeData,width:300,height:300})}),Object(j.jsx)(g.a,{children:Object(j.jsx)(x,{freqData:this.state.freqData,width:300,height:300})})]}),Object(j.jsx)(m.a,{children:Object(j.jsx)(g.a,{children:Object(j.jsx)("div",{children:i})})})]})}},{key:"componentDidMount",value:function(){this.checkStatusUpdates()}},{key:"componentWillUnmount",value:function(){this.stopAudio()}}]),i}(n.a.Component),A=i(38),F=function(t){Object(f.a)(i,t);var e=Object(v.a)(i);function i(){var t;return Object(h.a)(this,i),(t=e.call(this,{})).BUFFER_MS=50,t.state={audio:null},t.toggleMicrophone=t.toggleMicrophone.bind(Object(d.a)(t)),t}return Object(l.a)(i,[{key:"getMicrophone",value:function(){var t=Object(u.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 2:e=t.sent,this.setState({audio:e});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"stopMicrophone",value:function(){this.state.audio&&(this.state.audio.getTracks().forEach((function(t){return t.stop()})),this.setState({audio:null}))}},{key:"toggleMicrophone",value:function(){this.state.audio?this.stopMicrophone():this.getMicrophone()}},{key:"render",value:function(){var t=this.state.audio;return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(A.a,{className:"controls",children:[Object(j.jsx)(w,{audio:t}),Object(j.jsx)(b,{isRecording:null!==this.state.audio,onClick:this.toggleMicrophone})]})})}}]),i}(n.a.Component),S=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,39)).then((function(e){var i=e.getCLS,a=e.getFID,n=e.getFCP,r=e.getLCP,o=e.getTTFB;i(t),a(t),n(t),r(t),o(t)}))};o.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(F,{})}),document.getElementById("root")),S()}},[[35,1,2]]]);
//# sourceMappingURL=main.d54b41bd.chunk.js.map