(this.webpackJsonpbazamjam=this.webpackJsonpbazamjam||[]).push([[0],{42:function(t,e,i){},44:function(t,e,i){},52:function(t,e,i){"use strict";i.r(e);var a=i(0),n=i.n(a),r=i(15),s=i.n(r),c=(i(42),i(27)),o=i.n(c),u=i(31),h=i(9),l=i(10),d=i(16),f=i(12),j=i(11),v=(i(44),i(37)),p=i(1),b=function(t){var e=t.isRecording?"Stop Recording":"Start Recording",i=t.isRecording?"warning":"success";return Object(p.jsx)(v.a,{className:"recordingButton",type:"checkbox",value:"1",variant:i,checked:t.isRecording,onClick:t.onClick,children:e})},m=i(54),O=i(55),g=i(3),x=i(36),y=function(t){Object(f.a)(i,t);var e=Object(j.a)(i);function i(t){return Object(h.a)(this,i),e.call(this,t)}return Object(l.a)(i,[{key:"binWidth",get:function(){return this.props.fs/(2*this.props.binCount)}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"update",value:function(){this.render()}},{key:"rollingMax",value:function(t,e){for(var i=-1/0,a=Array(e).fill(i),n=Array(e).fill(i),r=0;r<t.length;r++)for(var s=t[r],c=a.length-1;c>=0;c--){if(s>a[c]){for(var o=0;o<c;o++)a[o]=a[o+1],n[o]=n[o+1];a[c]=s,n[c]=r;break}}return[a,n]}},{key:"getLargestNotes",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,i=this.rollingMax(this.props.freqData,e),a=Object(g.a)(i,2),n=(a[0],a[1]),r=n.map((function(e){return e*t.binWidth+t.binWidth/2}));return r}},{key:"render",value:function(){var t=this.getLargestNotes(2).reverse();return Object(p.jsx)("div",{children:Object(p.jsxs)(m.a,{children:[Object(p.jsxs)(O.a,{children:[t.map((function(t){return Object(p.jsx)("p",{children:t.toFixed(2)})})),Object(p.jsxs)("p",{children:["Bin width: ",this.binWidth]})]}),Object(p.jsx)(O.a,{children:t.map((function(t){return Object(p.jsx)("p",{children:x.a.fromFreq(t)})}))})]})})}}]),i}(n.a.Component),k=function(t){Object(f.a)(i,t);var e=Object(j.a)(i);function i(t){var a;return Object(h.a)(this,i),(a=e.call(this,t)).canvas=void 0,a.discount=.8,a.canvas=n.a.createRef(),a}return Object(l.a)(i,[{key:"componentDidUpdate",value:function(){this.draw()}},{key:"draw",value:function(){var t=this.props,e=t.freqData,i=t.width,a=t.height,n=this.canvas.current.getContext("2d");n.clearRect(0,0,i,a),n.lineWidth=2,n.strokeStyle="#000000";var r,s=i/e.length*2.5,c=0,o=e.reduce((function(t,e){return t<e?t:e}));for(var u in e)r=Math.pow(e[u]-o,1.2),n.fillStyle="rgb(".concat(r,",50,50,").concat(r,")"),n.fillRect(c,a-r/2,s,r),c+=s}},{key:"render",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("canvas",{className:"timeDomGraph",width:this.props.width,height:this.props.height,ref:this.canvas}),Object(p.jsx)("p",{})]})}}]),i}(n.a.Component),D=function(t){Object(f.a)(i,t);var e=Object(j.a)(i);function i(t){var a;return Object(h.a)(this,i),(a=e.call(this,t)).canvas=void 0,a.canvas=n.a.createRef(),a}return Object(l.a)(i,[{key:"componentDidUpdate",value:function(){this.draw()}},{key:"draw",value:function(){var t=this.props,e=t.audioData,i=t.width,a=t.height,n=this.canvas.current.getContext("2d"),r=0,s=1*i/e.length;for(var c in n.lineWidth=2,n.strokeStyle="#000000",n.clearRect(0,0,i,a),n.beginPath(),n.moveTo(0,a/2),e){var o=e[c]/255*a;n.lineTo(r,o),r+=s}n.lineTo(r,a/2),n.stroke()}},{key:"render",value:function(){return Object(p.jsx)("canvas",{className:"timeDomGraph",width:this.props.width,height:this.props.height,ref:this.canvas})}}]),i}(n.a.Component),w=function(t){Object(f.a)(i,t);var e=Object(j.a)(i);function i(t){var a;return Object(h.a)(this,i),(a=e.call(this,t)).audioContext=void 0,a.analyser=void 0,a.source=void 0,a.audioActive=!1,a.FFT_SIZE=2048,a.SAMPLE_RATE=16e3,a.timeDomainBuffer=void 0,a.freqDomainBuffer=void 0,a.framReqID=0,a.timeDomainBuffer=new Uint8Array(a.FFT_SIZE),a.freqDomainBuffer=new Float32Array(a.FFT_SIZE/2),a.state={timeData:a.timeDomainBuffer,freqData:a.freqDomainBuffer},a.tick=a.tick.bind(Object(d.a)(a)),a}return Object(l.a)(i,[{key:"startAudio",value:function(){null!=this.props.audio&&(null==this.audioContext&&(this.audioContext=new window.AudioContext({sampleRate:this.SAMPLE_RATE})),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.FFT_SIZE,this.source=this.audioContext.createMediaStreamSource(this.props.audio),this.source.connect(this.analyser),this.audioActive=!0,this.framReqID=requestAnimationFrame(this.tick))}},{key:"stopAudio",value:function(){var t,e;null===(t=this.analyser)||void 0===t||t.disconnect(),null===(e=this.source)||void 0===e||e.disconnect(),this.analyser=null,this.source=null,this.audioActive=!1,cancelAnimationFrame(this.framReqID)}},{key:"checkStatusUpdates",value:function(){null==this.props.audio||this.audioActive?null==this.props.audio&&this.audioActive&&this.stopAudio():this.startAudio()}},{key:"tick",value:function(t){this.analyser&&this.timeDomainBuffer&&this.freqDomainBuffer&&(this.analyser.getByteTimeDomainData(this.timeDomainBuffer),this.analyser.getFloatFrequencyData(this.freqDomainBuffer),this.setState({timeData:this.timeDomainBuffer,freqData:this.freqDomainBuffer}),this.framReqID=requestAnimationFrame(this.tick))}},{key:"render",value:function(){var t,e;this.checkStatusUpdates();var i=null==this.audioContext?"":Object(p.jsx)(y,{freqData:this.state.freqData,fs:null!==(t=null===(e=this.audioContext)||void 0===e?void 0:e.sampleRate)&&void 0!==t?t:0,binCount:this.FFT_SIZE/2,width:300,height:300});return Object(p.jsxs)("div",{children:[Object(p.jsxs)(m.a,{children:[Object(p.jsx)(O.a,{children:Object(p.jsx)(D,{audioData:this.state.timeData,width:300,height:300})}),Object(p.jsx)(O.a,{children:Object(p.jsx)(k,{freqData:this.state.freqData,width:300,height:300})})]}),Object(p.jsx)(m.a,{children:Object(p.jsx)(O.a,{children:Object(p.jsx)("div",{children:i})})})]})}},{key:"componentDidMount",value:function(){this.checkStatusUpdates()}},{key:"componentWillUnmount",value:function(){this.stopAudio()}}]),i}(n.a.Component),A=i(56),C=i(58),F=i(57),S=function(t){var e=[["Library","http://www.omfgdogs.com/#"]].map((function(t){var e=Object(g.a)(t,2),i=e[0],a=e[1];return Object(p.jsx)(C.a.Link,{href:a,children:i})}));return Object(p.jsx)(F.a,{bg:"light",expand:"lg",className:"topBar",children:Object(p.jsxs)(A.a,{children:[Object(p.jsx)(F.a.Brand,{href:"#home",children:"Bazamjam"}),Object(p.jsx)(F.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(p.jsx)(F.a.Collapse,{id:"basic-navbar-nav",children:Object(p.jsx)(C.a,{className:"me-auto",children:e})})]})})},q=function(t){Object(f.a)(i,t);var e=Object(j.a)(i);function i(){var t;return Object(h.a)(this,i),(t=e.call(this,{})).BUFFER_MS=50,t.state={audio:null},t.toggleMicrophone=t.toggleMicrophone.bind(Object(d.a)(t)),t}return Object(l.a)(i,[{key:"getMicrophone",value:function(){var t=Object(u.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 2:e=t.sent,this.setState({audio:e});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"stopMicrophone",value:function(){this.state.audio&&(this.state.audio.getTracks().forEach((function(t){return t.stop()})),this.setState({audio:null}))}},{key:"toggleMicrophone",value:function(){this.state.audio?this.stopMicrophone():this.getMicrophone()}},{key:"render",value:function(){var t=this.state.audio;return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(S,{}),Object(p.jsxs)(A.a,{className:"controls",children:[Object(p.jsx)(m.a,{className:"justify-content-center",children:Object(p.jsx)(b,{isRecording:null!==this.state.audio,onClick:this.toggleMicrophone})}),Object(p.jsx)(m.a,{children:Object(p.jsx)(w,{audio:t})})]})]})}}]),i}(n.a.Component),B=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,59)).then((function(e){var i=e.getCLS,a=e.getFID,n=e.getFCP,r=e.getLCP,s=e.getTTFB;i(t),a(t),n(t),r(t),s(t)}))};s.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(q,{})}),document.getElementById("root")),B()}},[[52,1,2]]]);
//# sourceMappingURL=main.9123c48e.chunk.js.map