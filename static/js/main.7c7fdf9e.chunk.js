(this.webpackJsonpbazamjam=this.webpackJsonpbazamjam||[]).push([[0],{128:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(19),c=n.n(r),s=(n(83),n(58),n(3)),o=n(4),u=n(54),d=n.n(u),l=(n(98),n(99),n(18)),h=n.n(l),j=n(25),b=n(20),f=n(24),O=n(27),v=function(){function e(t){Object(b.a)(this,e),this.recording=void 0,this.fs=void 0,this.recording=[],this.fs=t}return Object(f.a)(e,[{key:"addData",value:function(e){var t;(t=this.recording).push.apply(t,Object(O.a)(Array.from(e)))}},{key:"getRecording",value:function(){return this.recording}},{key:"clearRecording",value:function(){this.recording=[]}}]),e}();function m(e,t,n){return g.apply(this,arguments)}function g(){return(g=Object(j.a)(h.a.mark((function e(t,n,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("registering worker"),e.next=4,t.audioWorklet.addModule(n,{credentials:"omit"});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("error adding worklet module:"+e.t0);case 9:return e.abrupt("return",new AudioWorkletNode(t,a));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var x=new Float32Array(0),p=function(){function e(){var t=this;Object(b.a)(this,e),this.audioContext=void 0,this._nodes=void 0,this.nodeConnections=void 0,this.analyser=void 0,this.source=void 0,this.audioStream=void 0,this._timeBuffer=void 0,this._freqBuffer=void 0,this._recorder=void 0,this.audioActive=!1,this.FFT_SIZE=2048,this.SAMPLE_RATE=44100,this.BUFFER_SIZE=this.FFT_SIZE,this.addSourceNode=function(){if(t.audioContext&&t.audioStream){var e=new MediaStreamAudioSourceNode(t.audioContext,{mediaStream:t.audioStream});t.addNode(e,"source",{outputs:["analyzer"]})}},this._nodes={},this.nodeConnections={},this._timeBuffer=new Float32Array(this.FFT_SIZE),this._freqBuffer=new Float32Array(this.FFT_SIZE/2),this._recorder=new v(this.SAMPLE_RATE)}return Object(f.a)(e,[{key:"nodes",get:function(){return this._nodes}},{key:"initAudio",value:function(){var e=Object(j.a)(h.a.mark((function e(){var t,n,a,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.audioContext&&(this.audioContext=new window.AudioContext({sampleRate:this.SAMPLE_RATE})),null==this._nodes.analyzer&&(a=new AnalyserNode(this.audioContext,{fftSize:this.FFT_SIZE}),this.addNode(a,"analyzer")),null!=this.audioStream&&(null===(t=this.audioStream)||void 0===t?void 0:t.active)){e.next=9;break}return e.next=5,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 5:this.audioStream=e.sent,this.addSourceNode(),e.next=10;break;case 9:(null===(n=this.audioStream)||void 0===n?void 0:n.getTracks().every((function(e){return 0==e.enabled})))&&(null===(i=this.audioStream)||void 0===i||i.getTracks().forEach((function(e){return e.enabled=!0})));case 10:return null==this._nodes.source&&this.addSourceNode(),this.getTimeData.bind(this),this.getFreqData.bind(this),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"startRecording",value:function(){var e=Object(j.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initAudio();case 2:return t=e.sent,this.audioActive=t,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopRecording",value:function(){var e;null===(e=this.audioStream)||void 0===e||e.getTracks().forEach((function(e){return e.enabled=!1})),this.audioActive=!1}},{key:"getTimeData",value:function(){var e=this._nodes.analyzer;return e instanceof AnalyserNode?(e.getFloatTimeDomainData(this._timeBuffer),this._timeBuffer):x}},{key:"getFreqData",value:function(){var e=this._nodes.analyzer;return e instanceof AnalyserNode?(e.getFloatFrequencyData(this._freqBuffer),this._freqBuffer):x}},{key:"addNode",value:function(e,t,n){var a=this;if(this.nodeExists(t))throw new Error("Key already exists in audio graph");this._nodes[t]=e,(null===n||void 0===n?void 0:n.inputs)&&n.inputs.forEach((function(e){return a.connectNodes(e,t)})),(null===n||void 0===n?void 0:n.outputs)&&n.outputs.forEach((function(e){return a.connectNodes(t,e)}))}},{key:"nodeExists",value:function(e){return e in this._nodes}},{key:"connectNodes",value:function(e,t){if(!(e in this._nodes)&&!(t in this._nodes))throw new Error("At least one provided key is invalid");this._nodes[e].connect(this._nodes[t]),this.nodeConnections[e]=t}},{key:"addWorklet",value:function(){var e=Object(j.a)(h.a.mark((function e(t,n,a){var i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.audioContext&&!this.nodeExists(t)){e.next=3;break}return console.log("Can't add worklet - "+(this.audioContext?"Node exists":"Audio context null")),e.abrupt("return");case 3:return e.prev=3,e.next=6,m(this.audioContext,n,t);case 6:(i=e.sent).port.onmessage=a,this.addNode(i,t,{inputs:["source"]}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("Error adding worklet node:"+e.t0);case 14:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}(),y=p,S=function(){function e(t,n){Object(b.a)(this,e),this._soundData=void 0,this.freqData=void 0,this._soundData=t,this.freqData=n}return Object(f.a)(e,[{key:"soundData",get:function(){var e;return null!==(e=this._soundData)&&void 0!==e?e:new Float32Array(0)}},{key:"hasSoundData",value:function(){return this._soundData&&this._soundData.length>0}},{key:"setSoundData",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._soundData=t?new Float32Array(e):e}},{key:"setFreqData",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.freqData=t?new Float32Array(e):e}}]),e}(),N=S,_=(new S(new Float32Array(0)),new N(new Float32Array(0))),w=i.a.createContext(_);function k(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}function A(e){var t=e.reduce((function(e,t){return e+t*t}),0)/e.length;return Math.sqrt(t)}function E(e){var t=Array.from(e);return Math.max.apply(Math,Object(O.a)(t))-Math.min.apply(Math,Object(O.a)(t))}var C=Math.log(2),D=Math.log(440);var M=n(2),T=function(e){return Object(M.jsx)("div",{className:"inactive-display",children:" Press Play! "})},z=function(e){return Object(M.jsxs)("div",{className:"simple-component",children:[Object(M.jsx)("h4",{children:"Sound Stats"}),Object(M.jsx)(w.Consumer,{children:function(e){return e.hasSoundData()?Object(M.jsxs)("div",{children:["RMS: ",k(A(e.soundData),3),Object(M.jsx)("br",{}),"Amplitude: ",k(E(e.soundData),3)]}):Object(M.jsx)(T,{})}})]})},F=n(28);var I=function(e){var t,n=Object(a.useRef)(null),i=Object(a.useRef)(null),r=Object(a.useState)(),c=Object(o.a)(r,2),s=c[0],u=c[1],d=function(){i.current&&u({width:i.current.offsetWidth,height:i.current.offsetHeight})};Object(a.useLayoutEffect)((function(){d()}),[]),window.addEventListener("resize",(function(){clearInterval(t),t||(t=setTimeout(d,100))}));var l=e.isRecording&&null!=s;return Object(a.useLayoutEffect)((function(){if(l){var t,a=s,i=a.width,r=a.height,c=null===(t=n.current)||void 0===t?void 0:t.getContext("2d");null!=c&&(n.current.setAttribute("width",i.toString()),n.current.setAttribute("height",r.toString()),function(e,t,n,a){var i=0,r=n/t.length;e.strokeStyle="#ffffff",t.forEach((function(t,n){var c=t*a/2+a/2,s=5*r;e.fillRect(i,c,s,s),i+=r}))}(c,e.soundData,i,r))}}),[null===s||void 0===s?void 0:s.width,null===s||void 0===s?void 0:s.height,e.soundData[0],l]),Object(M.jsx)("div",{className:"timeDomGraph",ref:i,children:l&&Object(M.jsx)("canvas",{ref:n,width:s.width,height:s.height})})},R={recordOn:Object(M.jsx)(F.c,{size:100}),recordOff:Object(M.jsx)(F.d,{size:100}),pauseOn:Object(M.jsx)(F.b,{size:100}),pauseOff:Object(M.jsx)(F.a,{size:100})},L=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),i=n[0],r=n[1],c=Object(a.useState)(),s=Object(o.a)(c,2),u=s[0],d=s[1],l=i?R.recordOn:R.recordOff,h=function(){var t=new Float32Array(e.audioManager.getTimeData());e.updateSoundData(t)},j=e.audioManager.FFT_SIZE/e.audioManager.SAMPLE_RATE;return Object(a.useEffect)((function(){if(i){var e=setInterval(h,j);d(e)}else null!=u&&clearInterval(u)}),[i]),Object(M.jsxs)("div",{className:"recorder",children:[Object(M.jsx)("div",{className:"recorder-controls",children:Object(M.jsx)("div",{onClick:function(){var t=!i;t?(e.audioManager.startRecording(),console.log("\n\nstarted\n")):(e.audioManager.stopRecording(),e.updateSoundData(void 0),console.log("\n\nstopped\n")),r(t)},children:l})}),Object(M.jsx)(w.Consumer,{children:function(e){return e.hasSoundData()&&Object(M.jsx)(I,{soundData:e.soundData,isRecording:i})}})]})},B=n(5),P=n(135),q=n(33),H=n.n(q),G=(n(134),n(132)),V=n(136),W=n(133),Z=n(130),J=n(131),U=function(e){var t=Object(a.useState)(!0),n=Object(o.a)(t,2),i=n[0],r=n[1],c=e.variant||"success";return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)(J.a,{show:i,variant:c,onClose:function(){return r(!1)},dismissible:!0,children:[Object(M.jsx)(J.a.Heading,{children:e.header}),e.message]})})};function Y(e,t,n){return 0===(e=e.trim()).length&&(e=t,n&&(e=n+" "+e)),e}var K,Q=function(e){var t,n,i=Object(a.useState)(),r=Object(o.a)(i,2),c=r[0],s=r[1],u=Object(a.useState)(),d=Object(o.a)(u,2),l=d[0],b=d[1],f=Object(a.useState)(),O=Object(o.a)(f,2),v=O[0],m=O[1],g=Object(a.useState)(),x=Object(o.a)(g,2),p=x[0],y=x[1],S=Object(a.useState)(),N=Object(o.a)(S,2),_=N[0],w=N[1],k=Object(a.useState)(0),A=Object(o.a)(k,2),E=A[0],C=A[1],D=Object(a.useState)(),T=Object(o.a)(D,2),z=(T[0],T[1],Object(a.useState)(!1)),F=Object(o.a)(z,2),I=F[0],R=F[1],L=Object(a.useState)(""),B=Object(o.a)(L,2),P=B[0],q=B[1],H="-1",J=null!=v&&null!=l;c&&(t=Object.entries(c).map((function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(M.jsx)("option",{value:n,children:Y(a,n,"Song")})})));l&&(n=Object.entries(l).map((function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(M.jsx)("option",{value:n,children:Y(a,n,"Instrument")})})));function K(){return(K=Object(j.a)(h.a.mark((function t(){var n,a,i,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=new FormData).append("user_sample",_),console.log("formdata: ",Array.from(n.keys())),a={song_id:v,instrument_num:p,key_shift:E.toString(),all_tracks:String(p==H)},R(!0),i=Object.keys(a).map((function(e){return e+"="+String(a[e])})).join("&"),r=e.apiRoot+"create_song?"+i,console.log("fetching: "+r),fetch(r,{method:"POST",body:n,headers:{accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setOutputSong(t.song)}),(function(e){console.log(e),q(e.message)})).then((function(){R(!1)}));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(a.useEffect)((function(){fetch(e.apiRoot+"get_songs").then((function(e){return e.json()})).then((function(e){console.log(e),s(e)}),(function(e){console.log(e),q(e.message)}))}),[]),Object(a.useEffect)((function(){null!=v&&null!=c&&(y(H),fetch(e.apiRoot+"get_instruments?song_id="+v).then((function(e){return e.json()})).then((function(e){console.log(e),b(e)}),(function(e){console.log(e),q(e.message)})))}),[v]);return Object(M.jsx)("div",{className:"midi-form",children:Object(M.jsxs)(G.a,{onSubmit:function(e){if(e.preventDefault(),console.log("submitting"),!_)return q("Please select a sound file."),void console.log("no file selected");console.log("file: "+_),function(){K.apply(this,arguments)}()},children:[P.length>0&&Object(M.jsx)(U,{message:P,variant:"danger",header:"Error"}),Object(M.jsxs)(V.a,{className:"mb-3",children:[Object(M.jsx)(V.a.Text,{children:"\ud83c\udfa4"}),Object(M.jsx)(G.a.Control,{type:"file",size:"lg",accept:".wav",onChange:function(e){var t;return w(null===(t=e.target)||void 0===t?void 0:t.files[0])}})]}),Object(M.jsxs)(V.a,{className:"mb-3",children:[Object(M.jsx)(V.a.Text,{children:"\ud83c\udfbc"}),Object(M.jsxs)(G.a.Select,{size:"lg",onChange:function(e){return m(e.target.value)},children:[Object(M.jsx)("option",{disabled:!0,selected:!v,children:"Select a song"}),t]})]}),Object(M.jsxs)(V.a,{className:"mb-3",children:[Object(M.jsx)(V.a.Text,{children:"\ud83c\udfb7"}),Object(M.jsxs)(G.a.Select,{size:"lg",value:p,disabled:null==v,onChange:function(e){return y(e.target.value)},children:[J&&Object(M.jsx)("option",{value:H,children:"All Instruments"}),J?n:Object(M.jsx)("option",{children:"Must select a song"})]})]}),Object(M.jsx)(W.a,{className:"mb-3",children:Object(M.jsxs)(W.a.Item,{eventKey:"0",children:[Object(M.jsx)(W.a.Header,{children:"Other Options"}),Object(M.jsxs)(W.a.Body,{className:"midi-advanced-options",children:[Object(M.jsxs)(V.a,{className:"mb-3",onChange:function(e){return C(e.target.value)},children:[Object(M.jsx)(V.a.Text,{children:"Note Shift"}),Object(M.jsx)(G.a.Control,{type:"number",placeholder:"0"})]}),Object(M.jsx)(V.a,{className:"mb-3",children:Object(M.jsx)(G.a.Check,{label:"Include drums"})})]})]})}),Object(M.jsx)("div",{className:"mb-3 text-center",children:Object(M.jsx)(Z.a,{variant:"success",size:"lg",type:"submit",disabled:I,children:I?"Processing...":"Create Song"})})]})})},X=["className","style","children"];!function(e){e[e.None=0]="None",e[e.Submitted=1]="Submitted",e[e.Success=2]="Success",e[e.Error=3]="Error"}(K||(K={}));var $="https://bazamjam.uc.r.appspot.com/";var ee,te=Object(a.forwardRef)((function(e,t){var n=e.className,i=e.style,r=void 0===i?{}:i,c=(e.children,Object(B.a)(e,X)),u=Object(a.useState)(""),d=Object(o.a)(u,2),l=d[0],h=d[1],j=Object(a.useState)(K.None),b=Object(o.a)(j,2),f=(b[0],b[1],l);return Object(M.jsx)("div",Object(s.a)(Object(s.a)({},c),{},{style:Object(s.a)({},r),className:n+" midicomp",ref:t,children:Object(M.jsxs)("div",{className:"midi-main",children:[Object(M.jsx)("h1",{className:"midi-header",children:"Midi Mouth \ud83c\udfb6"}),Object(M.jsx)(Q,{apiRoot:$,setOutputSong:h}),Object(M.jsx)("hr",{}),l.length>0&&Object(M.jsxs)(P.a,{children:[Object(M.jsx)(P.a.Header,{children:Object(M.jsx)("h3",{children:"Your song is ready!"})}),Object(M.jsxs)(P.a.Body,{children:[Object(M.jsx)("a",{href:f,children:" Direct Link "}),Object(M.jsx)(H.a,{url:f,config:{file:{forceAudio:!0}},controls:!0,height:50,width:300})]})]})]})}))})),ne=n(57),ae=function(){function e(t){Object(b.a)(this,e),this._bufferSize=void 0,this._buffer=void 0,this._bufferSize=t,this._buffer=new Float32Array(this._bufferSize)}return Object(f.a)(e,[{key:"bufferSize",get:function(){return this._bufferSize}},{key:"data",get:function(){return this._buffer}},{key:"head",get:function(){return this._buffer[this._bufferSize-1]}},{key:"append",value:function(e){if(e.length>this._bufferSize)throw new Error("data.length > this._bufferSize");for(var t=e.length;t<this._bufferSize;t++)this._buffer[t-e.length]=this._buffer[t];for(var n=this._bufferSize-e.length,a=0;a<e.length;a++)this._buffer[n+a]=e[a]}},{key:"clear",value:function(){for(var e=0;e<this._bufferSize;e++)this._buffer[e]=0}},{key:"allZero",value:function(){for(var e=0;e<this._bufferSize;e++)if(0!=this._buffer[e])return!1;return!0}},{key:"mean",value:function(){for(var e=0,t=0;t<this._bufferSize;t++)e+=this._buffer[t];return e/this._bufferSize}},{key:"median",value:function(){var e=this._buffer.slice();return e.sort(),e[Math.floor(e.length/2)]}}]),e}(),ie=function(e){return Object(M.jsxs)("div",{className:"loading-display",children:[" Loading :",">"," "]})},re=function(e){return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{children:!e.targetNote.empty&&e.tuning.map((function(t){var n="";return t.name!==e.targetNote.name||isNaN(e.pitch)||(n+=" alert-text"),Object(M.jsxs)("span",{className:n,children:[t.name," "]})}))}),Object(M.jsxs)("div",{children:["Target: ",k(e.targetNote.freq,1)," Hz",Object(M.jsx)("br",{}),"You:",isNaN(e.pitch)?Object(M.jsx)("span",{children:" ~~~"}):Object(M.jsxs)("span",{children:[" ",k(e.pitch,1)," Hz"]})]})]})};!function(e){e[e.INACTIVE=0]="INACTIVE",e[e.LOADING=1]="LOADING",e[e.ACTIVE=2]="ACTIVE",e[e.OTHER_ERR=3]="OTHER_ERR"}(ee||(ee={}));var ce=function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n].map(ne.a.get);a.every((function(e){return!e.empty}))&&t.push(a)}return t}([["E2","A2","D3","G3","B3","E4"],["E2123","A2","Daa3","Gzyda3","B94%3","E4"]]);function se(e,t){var n=t.map((function(t){return null!=t.midi?Math.abs(t.midi-(n=e,12*(Math.log(n)-D)/C+69)):Number.MAX_SAFE_INTEGER;var n})),a=n.indexOf(Math.min.apply(Math,Object(O.a)(n)));return ne.a.get(t[a])}var oe,ue=function(e){var t,n=Object(a.useState)(NaN),i=Object(o.a)(n,2),r=i[0],c=i[1],s=Object(a.useState)(new ae(10)),u=Object(o.a)(s,2),d=(u[0],u[1]),l=Object(a.useState)(ce[0]),h=Object(o.a)(l,2),j=h[0],b=(h[1],Object(a.useState)(j[0])),f=Object(o.a)(b,2),O=f[0],v=f[1],m=Object(a.useState)(!1),g=Object(o.a)(m,2),x=g[0],p=g[1],y=Object(a.useState)(ee.INACTIVE),S=Object(o.a)(y,2),N=S[0],_=S[1],w=e.audioManager,k=e.audioActive,A=function(e){try{var t=Number.parseFloat(e.data);c(t),isNaN(t)||d((function(e){return e.append([t]),e}))}catch(e){console.log("error in onWorkletMsg: "+e)}};switch(Object(a.useEffect)((function(){w.addWorklet("pitch-processor","workers/pitch-worklet-processor.js",A)}),[N==ee.LOADING,w]),N){case ee.INACTIVE:t=Object(M.jsx)(T,{}),k&&_(ee.LOADING);break;case ee.LOADING:t=Object(M.jsx)(ie,{}),isNaN(r)||_(ee.ACTIVE);break;case ee.ACTIVE:t=Object(M.jsx)(re,{pitch:r,targetNote:O,tuning:j}),k||_(ee.INACTIVE);break;case ee.OTHER_ERR:default:t=Object(M.jsx)("div",{children:"error"})}return Object(a.useEffect)((function(){if(!isNaN(r)){var e=setTimeout((function(){v(se(r,j)),p((function(e){return!e}))}),400);return function(){clearTimeout(e)}}}),[x,j,isNaN(r)]),Object(M.jsxs)("div",{className:"tuner",children:[Object(M.jsx)("h4",{className:"",children:"Tuner"}),t]})},de=["className","style"],le=Object(a.forwardRef)((function(e,t){var n=e.className,a=e.style,i=void 0===a?{}:a,r=Object(B.a)(e,de);return Object(M.jsx)("div",Object(s.a)(Object(s.a)({},r),{},{style:Object(s.a)({},i),className:n+" dashboard-component",ref:t,children:r.children}))})),he=Object(u.WidthProvider)(d.a),je={rowHeight:200,cols:3,verticalCompact:!0,isBounded:!0,onLayoutChange:function(){}},be={i:"recorder",x:0,y:0,w:3,h:1,static:!0},fe={i:"tuner",x:0,y:1,w:1,h:1,static:!1},Oe={sample:{element:z,props:{},layout:{i:"sample",x:1,y:2,w:1,h:1}},midiMouth:{element:te,props:{},layout:{i:"1",x:0,y:0,w:1,h:3}}},ve=function(e){var t=Object(a.useState)(new y),n=Object(o.a)(t,2),i=n[0],r=(n[1],Object(a.useState)(new N)),c=Object(o.a)(r,2),u=c[0],d=c[1],l=Object(a.useMemo)((function(){return u}),[u]);return Object(M.jsx)("div",{className:"dashboard",children:Object(M.jsx)(w.Provider,{value:l,children:Object(M.jsxs)(he,Object(s.a)(Object(s.a)({className:"grid"},je),{},{children:[Object(M.jsx)(le,{"data-grid":be,children:Object(M.jsx)(L,{audioManager:i,updateSoundData:function(e){d(new N(e))}})},be.i),Object(M.jsx)(le,{"data-grid":fe,children:Object(M.jsx)(ue,{audioManager:i,audioActive:i.audioActive})},fe.i),Object(M.jsx)(le,{"data-grid":Oe.sample.layout,children:Object(M.jsx)(z,{})},Oe.sample.layout.i)]}))})})},me=n(13),ge=n(42),xe=n(43),pe=(n(127),n(75)),ye=n(48),Se=n(76),Ne=n(56),_e=n(77),we={menuClosed:Object(M.jsx)(ye.a,{}),menuOpen:Object(M.jsx)(ye.b,{}),library:Object(M.jsx)(pe.a,{}),settings:Object(M.jsx)(Se.a,{}),sourceCode:Object(M.jsx)(ye.c,{}),contact:Object(M.jsx)(F.e,{}),login:Object(M.jsx)(Ne.a,{}),logout:Object(M.jsx)(Ne.a,{}),midimouth:Object(M.jsx)(_e.a,{})},ke=function(e){var t=Object(a.useState)(1==e.isMobile),n=Object(o.a)(t,2),i=n[0],r=n[1],c=Object(ge.b)(),s=c.loginWithRedirect,u=c.logout,d=c.isAuthenticated,l=i?"BzJ":"BazamJam",h=e.isMobile?"20px":"175px",j=i?we.menuClosed:we.menuOpen,b=d?function(){}:s,f=d?function(){}:s;return e.isMobile&&!i&&r(!0),Object(M.jsx)("div",{className:"sidebar",children:Object(M.jsxs)(me.c,{collapsed:i,width:h,children:[Object(M.jsx)(me.f,{className:"title-header",children:Object(M.jsx)("div",{children:l})}),Object(M.jsx)(me.d,{children:Object(M.jsxs)(me.a,{iconShape:"round",children:[Object(M.jsx)(me.b,{icon:we.library,onClick:function(){return b()},children:d?Object(M.jsx)("a",{href:"https://omfgdogs.com/",children:"Library"}):"Library"}),Object(M.jsx)(me.b,{icon:we.midimouth,children:Object(M.jsx)(xe.b,{to:"/midi-mouth",children:"MidiMouth"})}),!d&&Object(M.jsx)(me.b,{icon:we.login,onClick:function(){return s()},children:"Sign in"}),d&&Object(M.jsx)(me.b,{icon:we.settings,onClick:function(){return f()},children:Object(M.jsx)("a",{href:"https://omfgdogs.com/",children:"Settings"})}),Object(M.jsx)(me.b,{icon:j,onClick:function(){return r(!i)},children:"Minimize"})]})}),Object(M.jsx)(me.e,{children:Object(M.jsxs)(me.a,{iconShape:"round",children:[d&&Object(M.jsx)(me.b,{icon:we.logout,onClick:function(){return u({returnTo:window.location.origin})},children:"Log out"}),Object(M.jsx)(me.b,{children:"Beta v0.1"}),Object(M.jsx)(me.b,{icon:we.contact,children:Object(M.jsx)("a",{href:"mailto:davidhaas6@gmail.com",children:"Contact"})}),Object(M.jsx)(me.b,{icon:we.sourceCode,children:Object(M.jsx)("a",{href:"https://github.com/davidhaas6/bazamjam",children:"Source"})})]})})]})})},Ae=function(e){return Object(M.jsxs)("div",{className:"App",children:[Object(M.jsx)(ke,{}),Object(M.jsx)(ve,{})]})},Ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,137)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),r(e),c(e)}))},Ce=n(8);!function(e){e[e.None=0]="None",e[e.Submitted=1]="Submitted",e[e.Success=2]="Success",e[e.Error=3]="Error"}(oe||(oe={}));var De="https://bazamjam.uc.r.appspot.com/";var Me=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)(oe.None),c=Object(o.a)(r,2),s=(c[0],c[1],n);return console.log(H.a.canPlay(s)),Object(M.jsxs)("div",{className:"midi-app",children:[Object(M.jsx)(ke,{}),Object(M.jsxs)("div",{className:"midi-main",children:[Object(M.jsx)("h1",{className:"midi-header",children:"Midi Mouth \ud83c\udfb6\ud83d\udc44\ud83c\udfb6"}),Object(M.jsx)(U,{header:"Howdy!",message:"Make a song with your voice! Choose a sound clip, song, and go!"}),Object(M.jsx)(Q,{apiRoot:De,setOutputSong:i}),Object(M.jsx)("hr",{}),n.length>0&&Object(M.jsxs)(P.a,{children:[Object(M.jsx)(P.a.Header,{children:Object(M.jsx)("h3",{children:"Your song is ready!"})}),Object(M.jsx)(P.a.Body,{children:Object(M.jsx)(H.a,{url:s,config:{file:{forceAudio:!0}},controls:!0,height:50,width:300})})]})]})]})};c.a.render(Object(M.jsx)(ge.a,{domain:"dev-9c8pon97.us.auth0.com",clientId:"cofJDIegnz1wWXwQiDA2Qda0lCQ4uKDL",redirectUri:window.location.origin,audience:"https://YOUR_DOMAIN/api/v2/",scope:"read:current_user update:current_user_metadata",children:Object(M.jsx)(xe.a,{children:Object(M.jsxs)(Ce.c,{children:[Object(M.jsx)(Ce.a,{path:"/",element:Object(M.jsx)(Ae,{})}),Object(M.jsx)(Ce.a,{path:"/midi-mouth",element:Object(M.jsx)(Me,{})})]})})}),document.getElementById("root")),Ee()},58:function(e,t,n){},83:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[128,1,2]]]);
//# sourceMappingURL=main.7c7fdf9e.chunk.js.map