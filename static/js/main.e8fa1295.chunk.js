(this.webpackJsonpbazamjam=this.webpackJsonpbazamjam||[]).push([[0],{21:function(e,t,n){},39:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),r=n(11),o=n.n(r),s=(n(39),n(21),n(5)),c=n(3),d=n(19),u=n.n(d),l=(n(54),n(55),n(9)),h=n.n(l),f=n(20),j=n(31),b=n(32),v=new Float32Array(0),O=function(){function e(){var t=this;Object(j.a)(this,e),this.audioContext=void 0,this._nodes=void 0,this.nodeConnections=void 0,this.analyser=void 0,this._timeBuffer=void 0,this._freqBuffer=void 0,this.source=void 0,this.audioStream=void 0,this.audioActive=!1,this.FFT_SIZE=2048,this.SAMPLE_RATE=16e3,this.addSourceNode=function(){if(t.audioContext&&t.audioStream){var e=new MediaStreamAudioSourceNode(t.audioContext,{mediaStream:t.audioStream});t.addNode(e,"source",{outputs:["analyzer"]})}},this._nodes={},this.nodeConnections={},this._timeBuffer=new Float32Array(this.FFT_SIZE),this._freqBuffer=new Float32Array(this.FFT_SIZE/2)}return Object(b.a)(e,[{key:"nodes",get:function(){return this._nodes}},{key:"initAudio",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,n,i,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.audioContext&&(this.audioContext=new window.AudioContext({sampleRate:this.SAMPLE_RATE})),null==this._nodes.analyzer&&(i=new AnalyserNode(this.audioContext,{fftSize:this.FFT_SIZE}),this.addNode(i,"analyzer")),null!=this.audioStream&&(null===(t=this.audioStream)||void 0===t?void 0:t.active)){e.next=9;break}return e.next=5,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 5:this.audioStream=e.sent,this.addSourceNode(),e.next=10;break;case 9:(null===(n=this.audioStream)||void 0===n?void 0:n.getTracks().every((function(e){return 0==e.enabled})))&&(null===(a=this.audioStream)||void 0===a||a.getTracks().forEach((function(e){return e.enabled=!0})));case 10:return null==this._nodes.source&&this.addSourceNode(),this.getTimeData.bind(this),this.getFreqData.bind(this),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"startRecording",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initAudio();case 2:return t=e.sent,this.audioActive=t,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopRecording",value:function(){var e;null===(e=this.audioStream)||void 0===e||e.getTracks().forEach((function(e){return e.enabled=!1})),this.audioActive=!1}},{key:"getTimeData",value:function(){var e=this._nodes.analyzer;return e instanceof AnalyserNode?(e.getFloatTimeDomainData(this._timeBuffer),this._timeBuffer):v}},{key:"getFreqData",value:function(){var e=this._nodes.analyzer;return e instanceof AnalyserNode?(e.getFloatFrequencyData(this._freqBuffer),this._freqBuffer):v}},{key:"addNode",value:function(e,t,n){var i=this;if(t in this._nodes)throw new Error("Key already exists in audio graph");this._nodes[t]=e,(null===n||void 0===n?void 0:n.inputs)&&n.inputs.forEach((function(e){return i.connectNodes(e,t)})),(null===n||void 0===n?void 0:n.outputs)&&n.outputs.forEach((function(e){return i.connectNodes(t,e)}))}},{key:"nodeExists",value:function(e){return e in this._nodes}},{key:"connectNodes",value:function(e,t){if(!(e in this._nodes)&&!(t in this._nodes))throw new Error("At least one provided key is invalid");this._nodes[e].connect(this._nodes[t]),this.nodeConnections[e]=t}}]),e}(),m=O,x=n(12),g=n(2),p=["className","style","children"],y=Object(i.forwardRef)((function(e,t){var n=e.className,i=e.style,a=void 0===i?{}:i,r=(e.children,Object(x.a)(e,p)),o=r.text,c=void 0===o?"Hi there":o;return Object(g.jsx)("div",Object(s.a)(Object(s.a)({},r),{},{style:Object(s.a)({},a),className:n+" recorder",ref:t,children:Object(g.jsxs)("div",{style:{textAlign:"center"},children:[" ",c," "]})}))})),S=n(7);var w=function(e){var t,n=Object(i.useRef)(null),a=Object(i.useRef)(null),r=Object(i.useState)(),o=Object(c.a)(r,2),s=o[0],d=o[1],u=function(){a.current&&d({width:a.current.offsetWidth,height:a.current.offsetHeight})};Object(i.useLayoutEffect)((function(){u()}),[]),window.addEventListener("resize",(function(){clearInterval(t),t||(t=setTimeout(u,100))}));var l=e.isRecording&&null!=s;return Object(i.useLayoutEffect)((function(){if(l){var t,i=s,a=i.width,r=i.height,o=null===(t=n.current)||void 0===t?void 0:t.getContext("2d");null!=o&&(n.current.setAttribute("width",a.toString()),n.current.setAttribute("height",r.toString()),function(e,t,n,i){var a=0,r=n/t.length;e.strokeStyle="#ffffff",t.forEach((function(t,n){var o=t*i/2+i/2,s=5*r;e.fillRect(a,o,s,s),a+=r}))}(o,e.soundData,a,r))}}),[null===s||void 0===s?void 0:s.width,null===s||void 0===s?void 0:s.height,e.soundData[0],l]),Object(g.jsx)("div",{className:"timeDomGraph",ref:a,children:l&&Object(g.jsx)("canvas",{ref:n,width:s.width,height:s.height})})},_=["className","style","children"],N={recordOn:Object(g.jsx)(S.c,{size:100}),recordOff:Object(g.jsx)(S.d,{size:100}),pauseOn:Object(g.jsx)(S.b,{size:100}),pauseOff:Object(g.jsx)(S.a,{size:100})},A=Object(i.forwardRef)((function(e,t){var n=e.className,a=e.style,r=void 0===a?{}:a,o=e.children,d=Object(x.a)(e,_),u=Object(i.useState)(!1),l=Object(c.a)(u,2),h=l[0],f=l[1],j=Object(i.useState)(!1),b=Object(c.a)(j,2),v=(b[0],b[1],Object(i.useState)(new Float32Array(0))),O=Object(c.a)(v,2),m=O[0],p=O[1],y=Object(i.useState)(),S=Object(c.a)(y,2),A=S[0],E=S[1],C=h?N.recordOn:N.recordOff,F=function(){var e=d.audioManager.getTimeData();p(new Float32Array(e))},k=d.audioManager.FFT_SIZE/d.audioManager.SAMPLE_RATE;return Object(i.useEffect)((function(){if(h){var e=setInterval(F,k);E(e)}else null!=A&&clearInterval(A)}),[h]),Object(g.jsxs)("div",Object(s.a)(Object(s.a)({},d),{},{style:Object(s.a)({},r),className:n+" recorder",ref:t,children:[Object(g.jsx)("div",{className:"recorder-controls",children:Object(g.jsx)("div",{onClick:function(){var e=!h;e?(d.audioManager.startRecording(),console.log("\n\nstarted\n")):(d.audioManager.stopRecording(),console.log("\n\nstopped\n")),f(e)},children:C})}),Object(g.jsx)(w,{soundData:m,isRecording:h}),o]}))})),E=Object(d.WidthProvider)(u.a),C={rowHeight:200,cols:3,verticalCompact:!0,isBounded:!0,onLayoutChange:function(){}},F={temp1:{element:y,props:{},layout:{i:"1",x:0,y:0,w:1,h:1}},temp2:{element:y,props:{},layout:{i:"2",x:1,y:1,w:1,h:1}}},k={i:"recorder",x:0,y:0,w:3,h:1,static:!0};var T=function(e){var t=Object(i.useState)(new m),n=Object(c.a)(t,2),a=n[0],r=(n[1],Object(i.useState)([F.temp1,F.temp2])),o=Object(c.a)(r,2),d=o[0],u=(o[1],Object(i.useMemo)((function(){return e=d,console.log("Components built"),e.map((function(e,t){return Object(i.createElement)(e.element,{props:e.props,className:"dashboard-component",key:e.layout.i,"data-grid":e.layout},e.children)}));var e}),[d]));return console.timeLog("dashboard"),Object(g.jsx)("div",{className:"dashboard",children:Object(g.jsxs)(E,Object(s.a)(Object(s.a)({className:"grid"},C),{},{children:[Object(g.jsx)(A,{className:"dashboard-component",audioManager:a,"data-grid":k},k.i),u]}))})},z=n(4),M=(n(58),n(33)),R=n(13),D=n(34),B={menuClosed:Object(g.jsx)(R.a,{}),menuOpen:Object(g.jsx)(R.b,{}),library:Object(g.jsx)(M.a,{}),settings:Object(g.jsx)(D.a,{}),sourceCode:Object(g.jsx)(R.c,{}),contact:Object(g.jsx)(S.e,{})},L=function(e){var t=Object(i.useState)(1==e.isMobile),n=Object(c.a)(t,2),a=n[0],r=n[1],o=a?"BzJ":"BazamJam",s=e.isMobile?"20px":"175px",d=a?B.menuClosed:B.menuOpen;return e.isMobile&&!a&&r(!0),Object(g.jsx)("div",{className:"sidebar",children:Object(g.jsxs)(z.c,{collapsed:a,width:s,children:[Object(g.jsx)(z.f,{className:"title-header",children:o}),Object(g.jsx)(z.d,{children:Object(g.jsxs)(z.a,{iconShape:"round",children:[Object(g.jsx)(z.b,{icon:B.library,children:Object(g.jsx)("a",{href:"https://omfgdogs.com/",children:"Library"})}),Object(g.jsx)(z.b,{icon:B.settings,children:Object(g.jsx)("a",{href:"https://omfgdogs.com/",children:"Settings"})}),Object(g.jsx)(z.b,{icon:d,onClick:function(){return r(!a)},children:"Minimize"})]})}),Object(g.jsx)(z.e,{children:Object(g.jsxs)(z.a,{iconShape:"round",children:[Object(g.jsx)(z.b,{icon:B.contact,children:Object(g.jsx)("a",{href:"mailto:davidhaas6@gmail.com",children:"Contact"})}),Object(g.jsx)(z.b,{icon:B.sourceCode,children:Object(g.jsx)("a",{href:"https://github.com/davidhaas6/bazamjam",children:"Source"})})]})})]})})},I=function(e){return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(L,{}),Object(g.jsx)(T,{})]})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),r(e),o(e)}))};o.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(I,{})}),document.getElementById("root")),q()}},[[59,1,2]]]);
//# sourceMappingURL=main.e8fa1295.chunk.js.map